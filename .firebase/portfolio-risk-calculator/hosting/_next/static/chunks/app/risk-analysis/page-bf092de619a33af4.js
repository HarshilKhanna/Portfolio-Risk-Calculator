(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{17430:(e,t,a)=>{"use strict";a.d(t,{RiskHeatmap:()=>h});var r=a(95155),s=a(12115),n=a(44980),o=a(83540),l=a(99445),i=a(94754),c=a(96025),u=a(16238),m=a(94517),d=a(70919),p=a(62341);function h(){let{assets:e}=(0,n.g)(),[t,a]=(0,s.useState)([]),[h,y]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!e.length){y(!1);return}let t=e.reduce((e,t)=>e+t.quantity*t.currentPrice*86,0),r=e.map(e=>{let a=(86*e.currentPrice-e.purchasePrice)/e.purchasePrice*100,r=Math.abs(e.regularMarketChangePercent),s=e.quantity*e.currentPrice*86/t*100;return{name:e.symbol,sharpeRatio:Number((0!==r?(a-0)/r:0).toFixed(2)),type:e.type,allocation:s}}),s=Math.floor(Math.min(...r.map(e=>e.sharpeRatio))),n=Math.ceil(Math.max(...r.map(e=>e.sharpeRatio))),o=(n-s)/10,l=[];for(let e=s;e<n;e+=o)l.push({range:"".concat(e.toFixed(1),"-").concat((e+o).toFixed(1)),frequency:0,assets:[]});r.forEach(e=>{let t=Math.min(Math.floor((e.sharpeRatio-s)/o),l.length-1);t>=0&&(l[t].frequency++,l[t].assets.push(e))}),a(l),y(!1)},[e]),h)?(0,r.jsx)("div",{className:"h-[400px] w-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"h-40 w-40 rounded-lg bg-muted animate-pulse"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading Sharpe ratio distribution..."})]})}):(0,r.jsx)("div",{className:"h-[400px] w-full",children:(0,r.jsx)(o.u,{width:"100%",height:"100%",children:(0,r.jsxs)(l.Q,{data:t,margin:{top:20,right:30,left:50,bottom:60},children:[(0,r.jsx)(i.d,{strokeDasharray:"3 3",opacity:.2}),(0,r.jsx)(c.W,{dataKey:"range",angle:-45,textAnchor:"end",height:60,interval:0,label:{value:"Sharpe Ratio Range",position:"bottom",offset:40}}),(0,r.jsx)(u.h,{label:{value:"Number of Assets",angle:-90,position:"left",offset:10}}),(0,r.jsx)(m.m,{content:(0,r.jsx)(e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,r.jsxs)("div",{className:"bg-background p-3 border rounded-md shadow-sm",children:[(0,r.jsxs)("p",{className:"font-medium",children:["Sharpe Ratio Range: ",e.range]}),(0,r.jsxs)("p",{className:"text-sm",children:["Number of Assets: ",e.frequency]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Assets in this range:"}),e.assets.map(e=>(0,r.jsxs)("div",{className:"text-xs mt-1",children:[e.name," (SR: ",e.sharpeRatio,")"]},e.name))]})]})}return null},{})}),(0,r.jsx)(d.e,{x:t.findIndex(e=>e.range.includes("0")),stroke:"#666",strokeDasharray:"3 3",label:{value:"Zero Sharpe Ratio",position:"top",fill:"#666"}}),(0,r.jsx)(p.G,{type:"monotone",dataKey:"frequency",stroke:"#1E3A8A",fill:"#1E3A8A",fillOpacity:.6})]})})})}},44980:(e,t,a)=>{"use strict";a.d(t,{PortfolioProvider:()=>i,g:()=>c});var r=a(95155),s=a(12115),n=a(87464);let o=(0,s.createContext)(void 0),l=[{symbol:"AAPL",longName:"Apple Inc.",type:"Equity",quantity:2,purchasePrice:18777,currentPrice:218.27,regularMarketChangePercent:-.03,value:37542,costBasis:18777,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"AMZN",longName:"Amazon.com Inc.",type:"Equity",quantity:2,purchasePrice:16786,currentPrice:196.21,regularMarketChangePercent:.52,value:33748,costBasis:16786,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"TSLA",longName:"Tesla Inc.",type:"Equity",quantity:5,purchasePrice:21293,currentPrice:248.71,regularMarketChangePercent:.45,value:106945,costBasis:21293,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"MSFT",longName:"Microsoft Corporation",type:"Equity",quantity:2,purchasePrice:33646,currentPrice:391.26,regularMarketChangePercent:.01,value:67297,costBasis:33646,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()}];function i(e){let{children:t}=e,[a,i]=(0,s.useState)(l),[c,u]=(0,s.useState)(!0),[m,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("portfolio");e&&i(JSON.parse(e)),u(!1)},[]),(0,s.useEffect)(()=>{c||localStorage.setItem("portfolio",JSON.stringify(a))},[a,c]),(0,s.useEffect)(()=>{let e=async()=>{if(0!==a.length){u(!0);try{let e=await Promise.all(a.map(async e=>{try{let t=await n.z.getStockData(e.symbol);return{...e,currentPrice:t.price,regularMarketChangePercent:t.changePercent,value:t.price*e.quantity}}catch(t){return console.error("Error updating ".concat(e.symbol,":"),t),e}}));i(e)}catch(e){console.error("Error updating prices:",e)}finally{u(!1)}}};e();let t=setInterval(e,3e5);return()=>clearInterval(t)},[]);let p=(0,s.useCallback)(async(e,t,r)=>{u(!0),d(null);try{let s=e.includes("(")?e.split("(")[1].replace(")","").trim():e;if(a.some(e=>e.symbol===s))throw Error("Asset already exists in portfolio");let o=await n.z.getStockData(s),l=83.34*o.price,c={symbol:s,longName:s,quantity:t,purchasePrice:r,currentPrice:o.price,regularMarketChangePercent:o.changePercent,value:l*t,costBasis:r,type:"Equity",purchaseDate:new Date().toISOString().split("T")[0],lastUpdated:new Date().toISOString()},u=[...a,c];i(u),localStorage.setItem("portfolio",JSON.stringify(u))}catch(e){throw console.error("Error adding asset:",e),d(e instanceof Error?e.message:"Failed to add asset"),e}finally{u(!1)}},[a]),h=(0,s.useCallback)((e,t)=>{u(!0);try{let r=a.map(a=>a.symbol===e?{...a,...t,value:(t.quantity||a.quantity)*a.currentPrice,lastUpdated:new Date().toISOString()}:a);i(r),localStorage.setItem("portfolio",JSON.stringify(r))}catch(e){throw console.error("Error editing asset:",e),e}finally{u(!1)}},[a]),y=(()=>{let e=a.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),t=a.reduce((e,t)=>e+t.value,0)-e;return{totalInvested:e,totalGain:t,totalGainPercent:e>0?t/e*100:0}})(),f=a.reduce((e,t)=>e+t.value,0);return(0,r.jsx)(o.Provider,{value:{assets:a,addAsset:p,removeAsset:e=>{let t=a.filter(t=>t.symbol!==e);i(t),localStorage.setItem("portfolio",JSON.stringify(t))},updateQuantity:(e,t)=>{let r=a.map(a=>a.symbol===e?{...a,quantity:t,value:a.currentPrice*t}:a);i(r),localStorage.setItem("portfolio",JSON.stringify(r))},clearPortfolio:()=>{i([]),localStorage.removeItem("portfolio")},totalValue:f,metrics:y,isLoading:c,error:m,editAsset:h},children:t})}let c=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("usePortfolio must be used within PortfolioProvider");return e}},46636:(e,t,a)=>{Promise.resolve().then(a.bind(a,17430)),Promise.resolve().then(a.bind(a,48774)),Promise.resolve().then(a.bind(a,99596))},48774:(e,t,a)=>{"use strict";a.d(t,{RiskMetrics:()=>u});var r=a(95155),s=a(12115),n=a(88482),o=a(55863),l=a(53999);let i=s.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,r.jsx)(o.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,r.jsx)(o.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});i.displayName=o.bL.displayName;var c=a(44980);function u(){let{assets:e}=(0,c.g)(),[t,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!e.length){l(!1);return}a((()=>{let t=e.map(e=>{let t=86*e.currentPrice,a=(t-e.purchasePrice)/e.purchasePrice*100,r=t*e.quantity,s=(t-e.purchasePrice)*e.quantity;return{symbol:e.symbol,return:a,value:r,profitLoss:s}}),a=t.reduce((e,t)=>e+t.value,0),r=e.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),s=t.reduce((e,t)=>e+t.profitLoss,0),n=(a-r)/r*100,o=t.map(e=>({symbol:e.symbol,weight:e.value/a*100}));return[{name:"Portfolio Value",value:Number(a),description:"Total current value of all holdings",format:e=>m(e),progressValue:100,progressColor:"bg-blue-500"},{name:"Portfolio Return",value:Number(n),description:"Overall portfolio performance",format:e=>"".concat(e.toFixed(2),"%"),progressValue:Math.abs(n),progressColor:n>=0?"bg-green-500":"bg-red-500"},{name:"Total P/L",value:Number(s),description:"Total profit or loss",format:e=>m(e),progressValue:Math.min(100*Math.abs(s/r),100),progressColor:s>=0?"bg-green-500":"bg-red-500"},...o.map(e=>({name:"".concat(e.symbol," Weight"),value:Number(e.weight),description:"Portfolio allocation in ".concat(e.symbol),format:e=>"".concat(e.toFixed(2),"%"),progressValue:e.weight,progressColor:"bg-purple-500"})),...t.map(e=>({name:"".concat(e.symbol," Return"),value:Number(e.return),description:"Individual return for ".concat(e.symbol),format:e=>"".concat(e.toFixed(2),"%"),progressValue:Math.abs(e.return),progressColor:e.return>=0?"bg-green-500":"bg-red-500"}))]})()),l(!1)},[e]),o)?(0,r.jsx)("div",{className:"h-[300px] w-full flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading metrics..."})}):(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,r.jsx)(n.Zp,{className:"overflow-hidden shadow-sm",children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,r.jsx)("h3",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-2xl font-bold",children:"number"==typeof e.value?e.format(e.value):e.value})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),void 0!==e.progressValue&&(0,r.jsx)(i,{value:e.progressValue,className:"h-2 ".concat(e.progressColor)})]})})},e.name))})}let m=e=>{let t=Math.abs(e);return t>=1e7?"₹".concat((e/1e7).toFixed(2)," Cr"):t>=1e5?"₹".concat((e/1e5).toFixed(2)," L"):t>=1e3?"₹".concat((e/1e3).toFixed(2),"K"):"₹".concat(e.toFixed(2))}},53999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},87464:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});let r="cvg3pjhr01qgvsqnco9gcvg3pjhr01qgvsqncoa0",s=[{symbol:"AAPL",name:"Apple Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"MSFT",name:"Microsoft Corporation",type:"Equity",exchange:"NASDAQ"},{symbol:"GOOGL",name:"Alphabet Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"AMZN",name:"Amazon.com Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"META",name:"Meta Platforms Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"TSLA",name:"Tesla Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"NFLX",name:"Netflix Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd.",type:"Equity",exchange:"NSE"},{symbol:"TCS.NS",name:"Tata Consultancy Services Ltd.",type:"Equity",exchange:"NSE"},{symbol:"INFY.NS",name:"Infosys Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd.",type:"Equity",exchange:"NSE"},{symbol:"TCS.NS",name:"Tata Consultancy Services Ltd.",type:"Equity",exchange:"NSE"},{symbol:"INFY.NS",name:"Infosys Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Ltd.",type:"Equity",exchange:"NSE"},{symbol:"SBIN.NS",name:"State Bank of India",type:"Equity",exchange:"NSE"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Ltd.",type:"Equity",exchange:"NSE"},{symbol:"ITC.NS",name:"ITC Ltd.",type:"Equity",exchange:"NSE"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Ltd.",type:"Equity",exchange:"NSE"}],n={searchStocks:async e=>{if((e=e.toLowerCase().trim()).length<2)return[];let t=s.filter(t=>t.symbol.toLowerCase().includes(e)||t.name.toLowerCase().includes(e));try{let a=await fetch("https://finnhub.io/api/v1/search?q=".concat(e,"&token=").concat(r));if(!a.ok)return console.warn("API request failed, using local results"),t;let s=((await a.json()).result||[]).filter(e=>"Common Stock"===e.type).map(e=>({symbol:e.symbol,name:e.description||e.symbol,type:"Equity",exchange:e.primaryExchange||"Unknown"}));return[...t,...s].filter((e,t,a)=>t===a.findIndex(t=>t.symbol===e.symbol)).sort((t,a)=>{let r=t.symbol.toLowerCase()===e||t.name.toLowerCase()===e,s=a.symbol.toLowerCase()===e||a.name.toLowerCase()===e;if(r&&!s)return -1;if(!r&&s)return 1;let n=t.symbol.endsWith(".NS"),o=a.symbol.endsWith(".NS");return n&&!o?-1:!n&&o?1:t.symbol.length-a.symbol.length}).slice(0,10)}catch(e){return console.error("Search error:",e),t}},getStockData:async e=>{try{let t=await fetch("https://finnhub.io/api/v1/quote?symbol=".concat(e,"&token=").concat(r));if(!t.ok)throw Error("Failed to fetch data for ".concat(e));let a=await t.json(),s=a.c||0;return{symbol:e,price:s,change:a.d||0,changePercent:a.dp||0,lastUpdated:new Date().toISOString()}}catch(e){throw console.error("Error fetching stock data:",e),e}},getMockStockData:e=>({symbol:e,price:100+100*Math.random(),change:Number((10*Math.random()-5).toFixed(2)),changePercent:Number((10*Math.random()-5).toFixed(2)),lastUpdated:new Date().toISOString()})}},88482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>u,ZB:()=>i,Zp:()=>o,aR:()=>l});var r=a(95155),s=a(12115),n=a(53999);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},99596:(e,t,a)=>{"use strict";a.d(t,{RiskScatterPlot:()=>y});var r=a(95155),s=a(12115),n=a(83540),o=a(83548),l=a(94754),i=a(96025),c=a(16238),u=a(1379),m=a(94517),d=a(24026),p=a(63807),h=a(44980);function y(){let{assets:e}=(0,h.g)(),[t,a]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!e.length){f(!1);return}let t=e.reduce((e,t)=>e+t.quantity*t.currentPrice*86,0);a(e.map(e=>{let a=Math.abs(e.regularMarketChangePercent),r=(86*e.currentPrice-e.purchasePrice)/e.purchasePrice*100,s=e.quantity*e.currentPrice*86/t*100;return{name:e.symbol,risk:a,return:r,allocation:s,type:e.type}})),f(!1)},[e]);let g=e=>{switch(e){case"Equity":return"#1E3A8A";case"Bond":return"#10B981";case"Commodity":return"#F59E0B";case"Real Estate":return"#EF4444";default:return"#6B7280"}};if(y)return(0,r.jsx)("div",{className:"h-[400px] w-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"h-40 w-40 rounded-lg bg-muted animate-pulse"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading risk analysis..."})]})});let x=t.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{});return(0,r.jsx)("div",{className:"h-[400px] w-full",children:(0,r.jsx)(n.u,{width:"100%",height:"100%",children:(0,r.jsxs)(o.t,{margin:{top:20,right:30,bottom:60,left:80},children:[(0,r.jsx)(l.d,{strokeDasharray:"3 3",opacity:.2}),(0,r.jsx)(i.W,{type:"number",dataKey:"risk",name:"Risk",unit:"%",domain:[0,"dataMax"],label:{value:"Risk (%)",position:"bottom",offset:10}}),(0,r.jsx)(c.h,{type:"number",dataKey:"return",name:"Return",unit:"%",domain:[0,"dataMax"],tickFormatter:e=>e.toFixed(2),label:{value:"Return (%)",angle:-90,position:"insideLeft",offset:-35,dy:50},tickMargin:10}),(0,r.jsx)(u.K,{type:"number",dataKey:"allocation",range:[50,400],name:"Allocation",unit:"%"}),(0,r.jsx)(m.m,{content:(0,r.jsx)(e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,r.jsxs)("div",{className:"bg-background p-3 border rounded-md shadow-sm",children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm",children:["Risk: ",e.risk,"%"]}),(0,r.jsxs)("p",{className:"text-sm",children:["Return: ",e.return,"%"]}),(0,r.jsxs)("p",{className:"text-sm",children:["Allocation: ",e.allocation,"%"]})]})}return null},{})}),(0,r.jsx)(d.s,{verticalAlign:"bottom",align:"center",layout:"horizontal",wrapperStyle:{paddingTop:"20px",bottom:0,left:"50%",transform:"translateX(-50%)"}}),Object.entries(x).map(e=>{let[t,a]=e;return(0,r.jsx)(p.X,{name:t,data:a,fill:g(t)},t)})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,228,51,441,684,358],()=>t(46636)),_N_E=e.O()}]);