(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{17430:(e,t,r)=>{"use strict";r.d(t,{RiskHeatmap:()=>h});var a=r(95155),s=r(12115),n=r(44980),o=r(83540),l=r(99445),i=r(94754),c=r(96025),u=r(16238),m=r(94517),d=r(70919),p=r(62341);function h(){let{assets:e}=(0,n.g)(),[t,r]=(0,s.useState)([]),[h,y]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!e.length){y(!1);return}let t=e.reduce((e,t)=>e+t.quantity*t.currentPrice*86,0),a=e.map(e=>{let r=(86*e.currentPrice-e.purchasePrice)/e.purchasePrice*100,a=Math.abs(e.regularMarketChangePercent),s=e.quantity*e.currentPrice*86/t*100;return{name:e.symbol,sharpeRatio:Number((0!==a?(r-0)/a:0).toFixed(2)),type:e.type,allocation:s}}),s=Math.floor(Math.min(...a.map(e=>e.sharpeRatio))),n=Math.ceil(Math.max(...a.map(e=>e.sharpeRatio))),o=(n-s)/10,l=[];for(let e=s;e<n;e+=o)l.push({range:"".concat(e.toFixed(1),"-").concat((e+o).toFixed(1)),frequency:0,assets:[]});a.forEach(e=>{let t=Math.min(Math.floor((e.sharpeRatio-s)/o),l.length-1);t>=0&&(l[t].frequency++,l[t].assets.push(e))}),r(l),y(!1)},[e]),h)?(0,a.jsx)("div",{className:"h-[400px] w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"h-40 w-40 rounded-lg bg-muted animate-pulse"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading Sharpe ratio distribution..."})]})}):(0,a.jsx)("div",{className:"h-[400px] w-full",children:(0,a.jsx)(o.u,{width:"100%",height:"100%",children:(0,a.jsxs)(l.Q,{data:t,margin:{top:20,right:30,left:50,bottom:60},children:[(0,a.jsx)(i.d,{strokeDasharray:"3 3",opacity:.2}),(0,a.jsx)(c.W,{dataKey:"range",angle:-45,textAnchor:"end",height:60,interval:0,label:{value:"Sharpe Ratio Range",position:"bottom",offset:40}}),(0,a.jsx)(u.h,{label:{value:"Number of Assets",angle:-90,position:"left",offset:10}}),(0,a.jsx)(m.m,{content:(0,a.jsx)(e=>{let{active:t,payload:r}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,a.jsxs)("div",{className:"bg-background p-3 border rounded-md shadow-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Sharpe Ratio Range: ",e.range]}),(0,a.jsxs)("p",{className:"text-sm",children:["Number of Assets: ",e.frequency]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Assets in this range:"}),e.assets.map(e=>(0,a.jsxs)("div",{className:"text-xs mt-1",children:[e.name," (SR: ",e.sharpeRatio,")"]},e.name))]})]})}return null},{})}),(0,a.jsx)(d.e,{x:t.findIndex(e=>e.range.includes("0")),stroke:"#666",strokeDasharray:"3 3",label:{value:"Zero Sharpe Ratio",position:"top",fill:"#666"}}),(0,a.jsx)(p.G,{type:"monotone",dataKey:"frequency",stroke:"#1E3A8A",fill:"#1E3A8A",fillOpacity:.6})]})})})}},44980:(e,t,r)=>{"use strict";r.d(t,{PortfolioProvider:()=>i,g:()=>c});var a=r(95155),s=r(12115),n=r(87464);let o=(0,s.createContext)(void 0),l=[{symbol:"AAPL",longName:"Apple Inc.",type:"Equity",quantity:2,purchasePrice:18777,currentPrice:218.27,regularMarketChangePercent:-.03,value:37542,costBasis:18777,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"AMZN",longName:"Amazon.com Inc.",type:"Equity",quantity:2,purchasePrice:16786,currentPrice:196.21,regularMarketChangePercent:.52,value:33748,costBasis:16786,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"TSLA",longName:"Tesla Inc.",type:"Equity",quantity:5,purchasePrice:21293,currentPrice:248.71,regularMarketChangePercent:.45,value:106945,costBasis:21293,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()},{symbol:"MSFT",longName:"Microsoft Corporation",type:"Equity",quantity:2,purchasePrice:33646,currentPrice:391.26,regularMarketChangePercent:.01,value:67297,costBasis:33646,purchaseDate:"2024-01-01",lastUpdated:new Date().toISOString()}];function i(e){let{children:t}=e,[r,i]=(0,s.useState)(l),[c,u]=(0,s.useState)(!0),[m,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{{let e=localStorage.getItem("portfolio");if(e)try{let t=JSON.parse(e);i(t)}catch(e){console.error("Error parsing saved portfolio:",e)}}u(!1)},[]),(0,s.useEffect)(()=>{if(!c)try{localStorage.setItem("portfolio",JSON.stringify(r))}catch(e){console.error("Error saving portfolio:",e)}},[r,c]),(0,s.useEffect)(()=>{let e=async()=>{if(0!==r.length){u(!0);try{let e=await Promise.all(r.map(async e=>{try{let t=await n.z.getStockData(e.symbol);return{...e,currentPrice:t.price,regularMarketChangePercent:t.changePercent,value:t.price*e.quantity}}catch(t){return console.error("Error updating ".concat(e.symbol,":"),t),e}}));i(e)}catch(e){console.error("Error updating prices:",e)}finally{u(!1)}}};e();let t=setInterval(e,3e5);return()=>clearInterval(t)},[]);let p=(0,s.useCallback)(async(e,t,a)=>{u(!0),d(null);try{let s=e.includes("(")?e.split("(")[1].replace(")","").trim():e;if(r.some(e=>e.symbol===s))throw Error("Asset already exists in portfolio");let o=await n.z.getStockData(s),l=83.34*o.price,c={symbol:s,longName:s,quantity:t,purchasePrice:a,currentPrice:o.price,regularMarketChangePercent:o.changePercent,value:l*t,costBasis:a,type:"Equity",purchaseDate:new Date().toISOString().split("T")[0],lastUpdated:new Date().toISOString()},u=[...r,c];i(u),localStorage.setItem("portfolio",JSON.stringify(u))}catch(e){throw console.error("Error adding asset:",e),d(e instanceof Error?e.message:"Failed to add asset"),e}finally{u(!1)}},[r]),h=(0,s.useCallback)(()=>{i([]);try{localStorage.removeItem("portfolio")}catch(e){console.error("Error clearing portfolio:",e)}},[]),y=(0,s.useCallback)((e,t)=>{u(!0);try{let a=r.map(r=>r.symbol===e?{...r,...t,value:(t.quantity||r.quantity)*r.currentPrice,lastUpdated:new Date().toISOString()}:r);i(a),localStorage.setItem("portfolio",JSON.stringify(a))}catch(e){throw console.error("Error editing asset:",e),e}finally{u(!1)}},[r]),f=(()=>{let e=r.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),t=r.reduce((e,t)=>e+t.value,0)-e;return{totalInvested:e,totalGain:t,totalGainPercent:e>0?t/e*100:0}})(),g=r.reduce((e,t)=>e+t.value,0);return(0,a.jsx)(o.Provider,{value:{assets:r,addAsset:p,removeAsset:e=>{let t=r.filter(t=>t.symbol!==e);i(t),localStorage.setItem("portfolio",JSON.stringify(t))},updateQuantity:(e,t)=>{let a=r.map(r=>r.symbol===e?{...r,quantity:t,value:r.currentPrice*t}:r);i(a),localStorage.setItem("portfolio",JSON.stringify(a))},clearPortfolio:h,totalValue:g,metrics:f,isLoading:c,error:m,editAsset:y},children:t})}let c=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("usePortfolio must be used within PortfolioProvider");return e}},46636:(e,t,r)=>{Promise.resolve().then(r.bind(r,17430)),Promise.resolve().then(r.bind(r,48774)),Promise.resolve().then(r.bind(r,99596))},48774:(e,t,r)=>{"use strict";r.d(t,{RiskMetrics:()=>u});var a=r(95155),s=r(12115),n=r(88482),o=r(55863),l=r(53999);let i=s.forwardRef((e,t)=>{let{className:r,value:s,...n}=e;return(0,a.jsx)(o.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(o.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});i.displayName=o.bL.displayName;var c=r(44980);function u(){let{assets:e}=(0,c.g)(),[t,r]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!e.length){l(!1);return}r((()=>{let t=e.map(e=>{let t=86*e.currentPrice,r=(t-e.purchasePrice)/e.purchasePrice*100,a=t*e.quantity,s=(t-e.purchasePrice)*e.quantity;return{symbol:e.symbol,return:r,value:a,profitLoss:s}}),r=t.reduce((e,t)=>e+t.value,0),a=e.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),s=t.reduce((e,t)=>e+t.profitLoss,0),n=(r-a)/a*100,o=t.map(e=>({symbol:e.symbol,weight:e.value/r*100}));return[{name:"Portfolio Value",value:Number(r),description:"Total current value of all holdings",format:e=>m(e),progressValue:100,progressColor:"bg-blue-500"},{name:"Portfolio Return",value:Number(n),description:"Overall portfolio performance",format:e=>"".concat(e.toFixed(2),"%"),progressValue:Math.abs(n),progressColor:n>=0?"bg-green-500":"bg-red-500"},{name:"Total P/L",value:Number(s),description:"Total profit or loss",format:e=>m(e),progressValue:Math.min(100*Math.abs(s/a),100),progressColor:s>=0?"bg-green-500":"bg-red-500"},...o.map(e=>({name:"".concat(e.symbol," Weight"),value:Number(e.weight),description:"Portfolio allocation in ".concat(e.symbol),format:e=>"".concat(e.toFixed(2),"%"),progressValue:e.weight,progressColor:"bg-purple-500"})),...t.map(e=>({name:"".concat(e.symbol," Return"),value:Number(e.return),description:"Individual return for ".concat(e.symbol),format:e=>"".concat(e.toFixed(2),"%"),progressValue:Math.abs(e.return),progressColor:e.return>=0?"bg-green-500":"bg-red-500"}))]})()),l(!1)},[e]),o)?(0,a.jsx)("div",{className:"h-[300px] w-full flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading metrics..."})}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,a.jsx)(n.Zp,{className:"overflow-hidden shadow-sm",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:"number"==typeof e.value?e.format(e.value):e.value})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),void 0!==e.progressValue&&(0,a.jsx)(i,{value:e.progressValue,className:"h-2 ".concat(e.progressColor)})]})})},e.name))})}let m=e=>{let t=Math.abs(e);return t>=1e7?"₹".concat((e/1e7).toFixed(2)," Cr"):t>=1e5?"₹".concat((e/1e5).toFixed(2)," L"):t>=1e3?"₹".concat((e/1e3).toFixed(2),"K"):"₹".concat(e.toFixed(2))}},53999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(52596),s=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},87464:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});let a="cvg3pjhr01qgvsqnco9gcvg3pjhr01qgvsqncoa0",s=[{symbol:"AAPL",name:"Apple Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"MSFT",name:"Microsoft Corporation",type:"Equity",exchange:"NASDAQ"},{symbol:"GOOGL",name:"Alphabet Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"AMZN",name:"Amazon.com Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"META",name:"Meta Platforms Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"TSLA",name:"Tesla Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"NFLX",name:"Netflix Inc.",type:"Equity",exchange:"NASDAQ"},{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd.",type:"Equity",exchange:"NSE"},{symbol:"TCS.NS",name:"Tata Consultancy Services Ltd.",type:"Equity",exchange:"NSE"},{symbol:"INFY.NS",name:"Infosys Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd.",type:"Equity",exchange:"NSE"},{symbol:"TCS.NS",name:"Tata Consultancy Services Ltd.",type:"Equity",exchange:"NSE"},{symbol:"INFY.NS",name:"Infosys Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Ltd.",type:"Equity",exchange:"NSE"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Ltd.",type:"Equity",exchange:"NSE"},{symbol:"SBIN.NS",name:"State Bank of India",type:"Equity",exchange:"NSE"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Ltd.",type:"Equity",exchange:"NSE"},{symbol:"ITC.NS",name:"ITC Ltd.",type:"Equity",exchange:"NSE"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Ltd.",type:"Equity",exchange:"NSE"}],n={searchStocks:async e=>{if((e=e.toLowerCase().trim()).length<2)return[];let t=s.filter(t=>t.symbol.toLowerCase().includes(e)||t.name.toLowerCase().includes(e));try{let r=await fetch("https://finnhub.io/api/v1/search?q=".concat(e,"&token=").concat(a));if(!r.ok)return console.warn("API request failed, using local results"),t;let s=((await r.json()).result||[]).filter(e=>"Common Stock"===e.type).map(e=>({symbol:e.symbol,name:e.description||e.symbol,type:"Equity",exchange:e.primaryExchange||"Unknown"}));return[...t,...s].filter((e,t,r)=>t===r.findIndex(t=>t.symbol===e.symbol)).sort((t,r)=>{let a=t.symbol.toLowerCase()===e||t.name.toLowerCase()===e,s=r.symbol.toLowerCase()===e||r.name.toLowerCase()===e;if(a&&!s)return -1;if(!a&&s)return 1;let n=t.symbol.endsWith(".NS"),o=r.symbol.endsWith(".NS");return n&&!o?-1:!n&&o?1:t.symbol.length-r.symbol.length}).slice(0,10)}catch(e){return console.error("Search error:",e),t}},getStockData:async e=>{try{let t=await fetch("https://finnhub.io/api/v1/quote?symbol=".concat(e,"&token=").concat(a));if(!t.ok)throw Error("Failed to fetch data for ".concat(e));let r=await t.json(),s=r.c||0;return{symbol:e,price:s,change:r.d||0,changePercent:r.dp||0,lastUpdated:new Date().toISOString()}}catch(e){throw console.error("Error fetching stock data:",e),e}},getMockStockData:e=>({symbol:e,price:100+100*Math.random(),change:Number((10*Math.random()-5).toFixed(2)),changePercent:Number((10*Math.random()-5).toFixed(2)),lastUpdated:new Date().toISOString()})}},88482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>u,ZB:()=>i,Zp:()=>o,aR:()=>l});var a=r(95155),s=r(12115),n=r(53999);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},99596:(e,t,r)=>{"use strict";r.d(t,{RiskScatterPlot:()=>y});var a=r(95155),s=r(12115),n=r(83540),o=r(83548),l=r(94754),i=r(96025),c=r(16238),u=r(1379),m=r(94517),d=r(24026),p=r(63807),h=r(44980);function y(){let{assets:e}=(0,h.g)(),[t,r]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!e.length){f(!1);return}let t=e.reduce((e,t)=>e+t.quantity*t.currentPrice*86,0);r(e.map(e=>{let r=Math.abs(e.regularMarketChangePercent),a=(86*e.currentPrice-e.purchasePrice)/e.purchasePrice*100,s=e.quantity*e.currentPrice*86/t*100;return{name:e.symbol,risk:r,return:a,allocation:s,type:e.type}})),f(!1)},[e]);let g=e=>{switch(e){case"Equity":return"#1E3A8A";case"Bond":return"#10B981";case"Commodity":return"#F59E0B";case"Real Estate":return"#EF4444";default:return"#6B7280"}};if(y)return(0,a.jsx)("div",{className:"h-[400px] w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"h-40 w-40 rounded-lg bg-muted animate-pulse"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading risk analysis..."})]})});let x=t.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{});return(0,a.jsx)("div",{className:"h-[400px] w-full",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(o.t,{margin:{top:20,right:30,bottom:60,left:80},children:[(0,a.jsx)(l.d,{strokeDasharray:"3 3",opacity:.2}),(0,a.jsx)(i.W,{type:"number",dataKey:"risk",name:"Risk",unit:"%",domain:[0,"dataMax"],label:{value:"Risk (%)",position:"bottom",offset:10}}),(0,a.jsx)(c.h,{type:"number",dataKey:"return",name:"Return",unit:"%",domain:[0,"dataMax"],tickFormatter:e=>e.toFixed(2),label:{value:"Return (%)",angle:-90,position:"insideLeft",offset:-35,dy:50},tickMargin:10}),(0,a.jsx)(u.K,{type:"number",dataKey:"allocation",range:[50,400],name:"Allocation",unit:"%"}),(0,a.jsx)(m.m,{content:(0,a.jsx)(e=>{let{active:t,payload:r}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,a.jsxs)("div",{className:"bg-background p-3 border rounded-md shadow-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm",children:["Risk: ",e.risk,"%"]}),(0,a.jsxs)("p",{className:"text-sm",children:["Return: ",e.return,"%"]}),(0,a.jsxs)("p",{className:"text-sm",children:["Allocation: ",e.allocation,"%"]})]})}return null},{})}),(0,a.jsx)(d.s,{verticalAlign:"bottom",align:"center",layout:"horizontal",wrapperStyle:{paddingTop:"20px",bottom:0,left:"50%",transform:"translateX(-50%)"}}),Object.entries(x).map(e=>{let[t,r]=e;return(0,a.jsx)(p.X,{name:t,data:r,fill:g(t)},t)})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,228,51,441,684,358],()=>t(46636)),_N_E=e.O()}]);